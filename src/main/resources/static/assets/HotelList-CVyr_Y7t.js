import{b as j,E as k,c as A,d as W,e as X,Q as q,R as G,g as J,S as Z,O as V,T as ee,U as te,V as ae,a3 as le,W as oe,X as se,Y as ne,o as ie}from"./element-plus-BQiw23q9.js";import{a0 as L,r as S,x as re,A as g,B as e,C as l,aY as de,o as c,ax as $,u as v,Q as i,D as h,M as ue,m as B,R as f}from"./vue-vendor-Cs8obalv.js";import{g as pe,d as ce}from"./hotels-B-PzGg76.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-x5eiJF7K.js";import"./index-DBeEaY1O.js";const _e={class:"hotel-list-container"},fe={class:"toolbar"},ge={class:"toolbar-left"},ve={class:"toolbar-right"},he={key:1},be={key:0},ye={key:1},Ce={class:"pagination-wrapper"},we={__name:"HotelList",setup(ke){const b=de(),s=L({name:"",city:"",starLevel:null,status:null}),y=S([]),m=S(!1),n=L({page:1,pageSize:10,total:0}),u=async()=>{m.value=!0;try{const o={page:n.page,pageSize:n.pageSize,name:s.name||void 0,city:s.city||void 0,starLevel:s.starLevel,status:s.status},a=await pe(o);a.data&&(y.value=a.data.list||[],n.total=a.data.total||0)}catch(o){console.error("加载酒店列表失败:",o),k.error("加载酒店列表失败"),y.value=[],n.total=0}finally{m.value=!1}},C=()=>{n.page=1,u()},D=()=>{s.name="",s.city="",s.starLevel=null,s.status=null,n.page=1,u()},T=o=>{n.page=o,u()},U=o=>{n.pageSize=o,n.page=1,u()},I=()=>{b.push("/hotels/create")},H=o=>{b.push(`/hotels/edit/${o.id}`)},M=o=>{b.push(`/hotels/edit/${o.id}`)},N=async o=>{try{await ie.confirm(`确定要删除酒店"${o.name}"吗？删除后状态将改为下架。`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),m.value=!0;try{await ce(o.id),k.success("删除成功"),u()}catch(a){console.error("删除酒店失败:",a),k.error("删除酒店失败")}finally{m.value=!1}}catch{}},R=o=>o?new Date(o).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-";return re(()=>{u()}),(o,a)=>{const x=X,_=W,r=G,z=q,p=J,F=A,w=j,d=ae,K=le,P=oe,O=te,Q=ne,Y=se;return c(),g("div",_e,[e(w,{class:"search-card",shadow:"never"},{default:l(()=>[e(F,{model:s,inline:!0,class:"search-form"},{default:l(()=>[e(_,{label:"酒店名称"},{default:l(()=>[e(x,{modelValue:s.name,"onUpdate:modelValue":a[0]||(a[0]=t=>s.name=t),placeholder:"请输入酒店名称",clearable:"",style:{width:"200px"},onKeyup:$(C,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"城市"},{default:l(()=>[e(x,{modelValue:s.city,"onUpdate:modelValue":a[1]||(a[1]=t=>s.city=t),placeholder:"请输入城市",clearable:"",style:{width:"150px"},onKeyup:$(C,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"星级"},{default:l(()=>[e(z,{modelValue:s.starLevel,"onUpdate:modelValue":a[2]||(a[2]=t=>s.starLevel=t),placeholder:"请选择星级",clearable:"",style:{width:"120px"}},{default:l(()=>[e(r,{label:"全部",value:null}),e(r,{label:"1星",value:1}),e(r,{label:"2星",value:2}),e(r,{label:"3星",value:3}),e(r,{label:"4星",value:4}),e(r,{label:"5星",value:5})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"状态"},{default:l(()=>[e(z,{modelValue:s.status,"onUpdate:modelValue":a[3]||(a[3]=t=>s.status=t),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:l(()=>[e(r,{label:"全部",value:null}),e(r,{label:"上架",value:1}),e(r,{label:"下架",value:0})]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(p,{type:"primary",onClick:C,icon:v(Z)},{default:l(()=>[...a[6]||(a[6]=[i("搜索",-1)])]),_:1},8,["icon"]),e(p,{onClick:D,icon:v(V)},{default:l(()=>[...a[7]||(a[7]=[i("重置",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),e(w,{class:"toolbar-card",shadow:"never"},{default:l(()=>[h("div",fe,[h("div",ge,[e(p,{type:"primary",onClick:I,icon:v(ee)},{default:l(()=>[...a[8]||(a[8]=[i("添加酒店",-1)])]),_:1},8,["icon"])]),h("div",ve,[e(p,{icon:v(V),onClick:u},{default:l(()=>[...a[9]||(a[9]=[i("刷新",-1)])]),_:1},8,["icon"])])])]),_:1}),e(w,{class:"table-card",shadow:"never"},{default:l(()=>[ue((c(),B(O,{data:y.value,stripe:"",border:"",style:{width:"100%"}},{default:l(()=>[e(d,{prop:"id",label:"ID",width:"80"}),e(d,{label:"酒店图片",width:"100"},{default:l(({row:t})=>[t.images&&t.images.length>0?(c(),B(K,{key:0,src:t.images[0],"preview-src-list":t.images,fit:"cover",style:{width:"60px",height:"60px","border-radius":"4px"}},null,8,["src","preview-src-list"])):(c(),g("span",he,"-"))]),_:1}),e(d,{prop:"name",label:"酒店名称","min-width":"150","show-overflow-tooltip":""}),e(d,{prop:"address",label:"地址","min-width":"200","show-overflow-tooltip":""},{default:l(({row:t})=>[i(f(`${t.province||""}${t.city||""}${t.district||""}${t.address||""}`),1)]),_:1}),e(d,{prop:"starLevel",label:"星级",width:"100"},{default:l(({row:t})=>[t.starLevel?(c(),g("span",be,f(t.starLevel)+"星",1)):(c(),g("span",ye,"-"))]),_:1}),e(d,{label:"房型数量",width:"100"},{default:l(({row:t})=>[i(f(t.roomCount!==void 0?t.roomCount:"-"),1)]),_:1}),e(d,{prop:"status",label:"状态",width:"100"},{default:l(({row:t})=>[e(P,{type:t.status===1?"success":"info"},{default:l(()=>[i(f(t.status===1?"上架":"下架"),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"createTime",label:"创建时间",width:"180",sortable:"custom"},{default:l(({row:t})=>[i(f(R(t.createTime)),1)]),_:1}),e(d,{label:"操作",width:"200",fixed:"right"},{default:l(({row:t})=>[e(p,{link:"",type:"primary",size:"small",onClick:E=>H(t)},{default:l(()=>[...a[10]||(a[10]=[i("查看",-1)])]),_:1},8,["onClick"]),e(p,{link:"",type:"primary",size:"small",onClick:E=>M(t)},{default:l(()=>[...a[11]||(a[11]=[i("编辑",-1)])]),_:1},8,["onClick"]),e(p,{link:"",type:"danger",size:"small",onClick:E=>N(t),disabled:t.status===0},{default:l(()=>[...a[12]||(a[12]=[i(" 删除 ",-1)])]),_:1},8,["onClick","disabled"])]),_:1})]),_:1},8,["data"])),[[Y,m.value]]),h("div",Ce,[e(Q,{"current-page":n.page,"onUpdate:currentPage":a[4]||(a[4]=t=>n.page=t),"page-size":n.pageSize,"onUpdate:pageSize":a[5]||(a[5]=t=>n.pageSize=t),"page-sizes":[10,20,50,100],total:n.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:U,onCurrentChange:T},null,8,["current-page","page-size","total"])])]),_:1})])}}},$e=me(we,[["__scopeId","data-v-f094d7b8"]]);export{$e as default};
