import{b as h,c as E,d as k,e as B,f as C,g as F,E as p}from"./element-plus-BQiw23q9.js";import{r as c,a0 as L,A as R,B as s,C as r,aY as S,aZ as U,o as q,D as n,_ as z,ax as I,Q as _,R as N}from"./vue-vendor-Cs8obalv.js";import{u as A}from"./index-DBeEaY1O.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-x5eiJF7K.js";const K={class:"login-container"},M={class:"login-options"},Q={__name:"Login",setup(T){const g=S(),f=U(),b=A(),u=c(null),l=c(!1),o=L({username:"",password:"",remember:!1}),w={username:[{required:!0,message:"请输入用户名或手机号",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},i=async()=>{u.value&&await u.value.validate(async m=>{if(m){l.value=!0;try{await b.userLogin({username:o.username,password:o.password,remember:o.remember}),p.success("登录成功");const e=f.query.redirect||"/dashboard";g.push(e)}catch(e){p.error(e.message||"登录失败，请检查用户名和密码")}finally{l.value=!1}}})};return(m,e)=>{const d=B,t=k,y=C,v=F,x=E,V=h;return q(),R("div",K,[s(V,{class:"login-card",shadow:"always"},{default:r(()=>[e[4]||(e[4]=n("div",{class:"login-header"},[n("h2",null,"管理员登录"),n("p",{class:"login-subtitle"},"旅游平台后台管理系统")],-1)),s(x,{model:o,rules:w,ref_key:"loginFormRef",ref:u,onSubmit:z(i,["prevent"])},{default:r(()=>[s(t,{prop:"username"},{default:r(()=>[s(d,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=a=>o.username=a),placeholder:"用户名/手机号",size:"large","prefix-icon":"User",clearable:""},null,8,["modelValue"])]),_:1}),s(t,{prop:"password"},{default:r(()=>[s(d,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.password=a),type:"password",placeholder:"密码","show-password":"",size:"large","prefix-icon":"Lock",clearable:"",onKeyup:I(i,["enter"])},null,8,["modelValue"])]),_:1}),s(t,null,{default:r(()=>[n("div",M,[s(y,{modelValue:o.remember,"onUpdate:modelValue":e[2]||(e[2]=a=>o.remember=a)},{default:r(()=>[...e[3]||(e[3]=[_("记住我",-1)])]),_:1},8,["modelValue"])])]),_:1}),s(t,null,{default:r(()=>[s(v,{type:"primary",onClick:i,loading:l.value,size:"large",style:{width:"100%"}},{default:r(()=>[_(N(l.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}},J=D(Q,[["__scopeId","data-v-e637e26e"]]);export{J as default};
