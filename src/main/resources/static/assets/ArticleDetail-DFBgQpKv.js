import{b as M,E as R,ag as V,ah as z,W as H,a3 as S,ai as F,X as K,g as O}from"./element-plus-BQiw23q9.js";import{r as y,a0 as Q,x as W,A as d,B as l,C as a,aZ as X,aY as Y,o as n,M as Z,D as _,Q as s,R as i,m,O as k,K as $,ac as j,E as q}from"./vue-vendor-Cs8obalv.js";import{c as G,e as J}from"./articles-JJVSk3Ev.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-x5eiJF7K.js";import"./index-DBeEaY1O.js";const U={class:"article-detail-container"},ee={class:"card-header"},te={class:"article-detail-content"},ae={key:1},le={key:0},se=["innerHTML"],oe={__name:"ArticleDetail",setup(re){const v=Y(),h=X(),g=y(!1),t=Q({id:null,title:"",categoryId:null,categoryName:"",summary:"",coverImage:"",author:"",status:0,publishTime:null,content:"",viewCount:0,likeCount:0,createTime:null,updateTime:null,tagIds:[]}),b=y([]),u=y([]),I=async()=>{g.value=!0;try{const o=await J(h.params.id);if(o.data){const e=o.data;t.id=e.id,t.title=e.title||"",t.categoryId=e.categoryId||null,t.categoryName=e.categoryName||"",t.summary=e.summary||"",t.coverImage=e.coverImage||"",t.author=e.author||"",t.status=e.status!==void 0?e.status:0,t.publishTime=e.publishTime||null,t.content=e.content||"",t.viewCount=e.viewCount||0,t.likeCount=e.likeCount||0,t.createTime=e.createTime||null,t.updateTime=e.updateTime||null,e.tagIds&&Array.isArray(e.tagIds)?w(e.tagIds):e.tags&&Array.isArray(e.tags)?u.value=e.tags:u.value=[]}}catch(o){console.error("加载文章详情失败:",o),R.error("加载文章详情失败")}finally{g.value=!1}},C=async()=>{try{const o=await G();o.data&&(b.value=o.data||[])}catch(o){console.error("加载标签列表失败:",o)}},w=o=>{u.value=b.value.filter(e=>o.includes(e.id))},x=()=>{v.push("/articles")},D=()=>{v.push(`/articles/edit/${h.params.id}`)},f=o=>o?new Date(o).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-";return W(()=>{C().then(()=>{I()})}),(o,e)=>{const T=O,r=z,p=H,E=S,A=V,N=F,B=M,L=K;return n(),d("div",U,[l(B,{shadow:"never"},{header:a(()=>[_("div",ee,[e[2]||(e[2]=_("span",null,"文章详情",-1)),_("div",null,[l(T,{onClick:x},{default:a(()=>[...e[0]||(e[0]=[s("返回",-1)])]),_:1}),l(T,{type:"primary",onClick:D},{default:a(()=>[...e[1]||(e[1]=[s("编辑",-1)])]),_:1})])])]),default:a(()=>[Z((n(),d("div",te,[l(A,{column:2,border:""},{default:a(()=>[l(r,{label:"文章标题"},{default:a(()=>[s(i(t.title),1)]),_:1}),l(r,{label:"文章分类"},{default:a(()=>[s(i(t.categoryName||"-"),1)]),_:1}),l(r,{label:"作者"},{default:a(()=>[s(i(t.author||"-"),1)]),_:1}),l(r,{label:"状态"},{default:a(()=>[t.status===0?(n(),m(p,{key:0,type:"info"},{default:a(()=>[...e[3]||(e[3]=[s("草稿",-1)])]),_:1})):t.status===1?(n(),m(p,{key:1,type:"success"},{default:a(()=>[...e[4]||(e[4]=[s("已发布",-1)])]),_:1})):t.status===2?(n(),m(p,{key:2,type:"warning"},{default:a(()=>[...e[5]||(e[5]=[s("已下架",-1)])]),_:1})):k("",!0)]),_:1}),l(r,{label:"发布时间",span:2},{default:a(()=>[s(i(f(t.publishTime)||"-"),1)]),_:1}),l(r,{label:"阅读量"},{default:a(()=>[s(i(t.viewCount||0),1)]),_:1}),l(r,{label:"点赞量"},{default:a(()=>[s(i(t.likeCount||0),1)]),_:1}),l(r,{label:"封面图",span:2},{default:a(()=>[t.coverImage?(n(),m(E,{key:0,src:t.coverImage,style:{"max-width":"300px","max-height":"200px"},fit:"contain","preview-src-list":[t.coverImage]},null,8,["src","preview-src-list"])):(n(),d("span",ae,"-"))]),_:1}),l(r,{label:"文章摘要",span:2},{default:a(()=>[s(i(t.summary||"-"),1)]),_:1}),l(r,{label:"标签",span:2},{default:a(()=>[(n(!0),d($,null,j(u.value,c=>(n(),m(p,{key:c.id,type:c.color?"":"info",style:q(c.color?{color:c.color,borderColor:c.color,marginRight:"8px"}:{marginRight:"8px"})},{default:a(()=>[s(i(c.name),1)]),_:2},1032,["type","style"]))),128)),u.value.length===0?(n(),d("span",le,"-")):k("",!0)]),_:1}),l(r,{label:"创建时间"},{default:a(()=>[s(i(f(t.createTime)||"-"),1)]),_:1}),l(r,{label:"更新时间"},{default:a(()=>[s(i(f(t.updateTime)||"-"),1)]),_:1})]),_:1}),l(N,{"content-position":"left"},{default:a(()=>[...e[6]||(e[6]=[s("文章内容",-1)])]),_:1}),_("div",{class:"article-content",innerHTML:t.content},null,8,se)])),[[L,g.value]])]),_:1})])}}},pe=P(oe,[["__scopeId","data-v-65b51a28"]]);export{pe as default};
