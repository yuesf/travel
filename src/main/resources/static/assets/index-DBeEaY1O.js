const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-CvozAiXk.js","assets/element-plus-BQiw23q9.js","assets/vue-vendor-Cs8obalv.js","assets/vendor-x5eiJF7K.js","assets/vendor-CyWCKlaR.css","assets/element-plus-CRVMMY26.css","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/Login-3tRaOdmQ.css","assets/MainLayout-CExuTweW.js","assets/MainLayout-QNVXpwxs.css","assets/Dashboard-B2SY0gv3.js","assets/Dashboard-B1HbboO4.css","assets/AttractionList-CWps5VD1.js","assets/attractions-DXGY3QSt.js","assets/AttractionList-CwNJa3aI.css","assets/AttractionForm-BJFwpese.js","assets/ImageUpload-v2Ox_fSm.js","assets/ImageUpload-CgyVTtQ2.css","assets/VideoUpload-DRpY8zM5.js","assets/VideoUpload-CmIK3SpF.css","assets/RichTextEditor-B6hxx3ZN.js","assets/RichTextEditor-BlbvR8li.css","assets/MapPicker-GKwCqwxv.js","assets/MapPicker-DWLZNzUG.css","assets/AttractionForm-2X8Eqxhz.css","assets/HotelList-CVyr_Y7t.js","assets/hotels-B-PzGg76.js","assets/HotelList-Cswpe90h.css","assets/HotelForm-CV_5QKHo.js","assets/HotelForm-TvaGzmiz.css","assets/ProductList-bwCNSUQ_.js","assets/products-7HgEtHJ3.js","assets/categories-B-2g2K6-.js","assets/ProductList-x8lqH_aB.css","assets/ProductForm-BvsbZlej.js","assets/ProductForm-DPb3rzfB.css","assets/CategoryList-BwquaBes.js","assets/CategoryList-DEdDpfeN.css","assets/MiniProgramLayout-DJevCS7G.js","assets/MiniProgramLayout-Diy-kO1V.css","assets/HomeConfig-Bey2eqbc.js","assets/miniprogram-Bq4ZPLt3.js","assets/articles-JJVSk3Ev.js","assets/HomeConfig-zEFrzSY5.css","assets/AdConfig-BWSVzSb1.js","assets/AdConfig-D26un4Vp.css","assets/LogoConfig-B_KkxoVQ.js","assets/LogoConfig-CTE7UYJr.css","assets/Statistics-G6MWkpRV.js","assets/Statistics-DjL50lJY.css","assets/ArticleList-CJ7UQZyM.js","assets/ArticleList-ELfAchJA.css","assets/ArticleForm-CQFozy3r.js","assets/ArticleForm-CES9oJ_G.css","assets/ArticleDetail-DFBgQpKv.js","assets/ArticleDetail-rwwJ-CB0.css","assets/CategoryList-KznKSXNQ.js","assets/CategoryList-CKXsop8D.css","assets/TagList-DEsq0Lhe.js","assets/TagList-CFQjAZ2j.css","assets/PaymentConfig-Bhjm_hfS.js","assets/PaymentConfig-7lY2IuBX.css","assets/MerchantConfig-1At9PXZ4.js","assets/MerchantConfig-Ccp6h1tt.css","assets/403-Bohp_FUU.js","assets/403-ByxA3kZa.css","assets/404-BymdgUJr.js","assets/404-BcGyfaU_.css"])))=>i.map(i=>d[i]);
import{aT as q,aU as T,aV as D,r as I,am as V,m as S,o as b,aQ as k,aW as w,aX as C}from"./vue-vendor-Cs8obalv.js";import{E as c,a as $,i as U,z as N}from"./element-plus-BQiw23q9.js";import{W as j,X as M,Z as B,_ as H,$ as F,a0 as K,a1 as W,a2 as z,a3 as X}from"./vendor-x5eiJF7K.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const _="admin_token",g="remember_me";function v(){return localStorage.getItem(g)==="true"?localStorage.getItem(_)||"":sessionStorage.getItem(_)||""}function Y(t,e=!1){localStorage.setItem(g,e.toString()),e?(localStorage.setItem(_,t),sessionStorage.removeItem(_)):(sessionStorage.setItem(_,t),localStorage.removeItem(_))}function A(){localStorage.removeItem(_),sessionStorage.removeItem(_),localStorage.removeItem(g)}const G="modulepreload",Q=function(t){return"/"+t},L={},r=function(e,s,i){let o=Promise.resolve();if(s&&s.length>0){let a=function(m){return Promise.all(m.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),P=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=a(s.map(m=>{if(m=Q(m),m in L)return;L[m]=!0;const d=m.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${h}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":G,d||(l.as="script"),l.crossOrigin="",l.href=m,P&&l.setAttribute("nonce",P),document.head.appendChild(l),d)return new Promise((O,R)=>{l.addEventListener("load",O),l.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${m}`)))})}))}function n(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return o.then(a=>{for(const u of a||[])u.status==="rejected"&&n(u.reason);return e().catch(n)})};function Z(t){t.beforeEach(async(e,s,i)=>{const o=v();if(e.meta&&e.meta.title?document.title=`${e.meta.title} - 旅游平台后台管理系统`:document.title="旅游平台后台管理系统",["/login"].includes(e.path)){o?i({path:"/dashboard",replace:!0}):i();return}if(!o){i({path:"/login",query:{redirect:e.fullPath},replace:!0});return}e.meta&&e.meta.requiresAuth,i()}),t.afterEach((e,s)=>{}),t.onError(e=>{console.error("路由错误:",e),console.error("错误堆栈:",e.stack),console.error("错误消息:",e.message),c.error(`页面加载失败: ${e.message||"未知错误"}，请查看控制台获取详细信息`)})}const x=[{path:"/login",name:"Login",component:()=>r(()=>import("./Login-CvozAiXk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),meta:{title:"登录",requiresAuth:!1}},{path:"/",component:()=>r(()=>import("./MainLayout-CExuTweW.js"),__vite__mapDeps([8,1,2,3,4,5,6,9])),redirect:"/dashboard",meta:{requiresAuth:!0},children:[{path:"dashboard",name:"Dashboard",component:()=>r(()=>import("./Dashboard-B2SY0gv3.js"),__vite__mapDeps([10,1,2,3,4,5,6,11])),meta:{title:"首页",requiresAuth:!0}},{path:"attractions",name:"Attractions",component:()=>r(()=>import("./AttractionList-CWps5VD1.js"),__vite__mapDeps([12,1,2,3,4,5,13,6,14])),meta:{title:"景点管理",requiresAuth:!0}},{path:"attractions/create",name:"AttractionCreate",component:()=>r(()=>import("./AttractionForm-BJFwpese.js"),__vite__mapDeps([15,1,2,3,4,5,16,6,17,18,19,20,21,22,23,13,24])),meta:{title:"创建景点",requiresAuth:!0}},{path:"attractions/edit/:id",name:"AttractionEdit",component:()=>r(()=>import("./AttractionForm-BJFwpese.js"),__vite__mapDeps([15,1,2,3,4,5,16,6,17,18,19,20,21,22,23,13,24])),meta:{title:"编辑景点",requiresAuth:!0}},{path:"hotels",name:"Hotels",component:()=>r(()=>import("./HotelList-CVyr_Y7t.js"),__vite__mapDeps([25,1,2,3,4,5,26,6,27])),meta:{title:"酒店管理",requiresAuth:!0}},{path:"hotels/create",name:"HotelCreate",component:()=>r(()=>import("./HotelForm-CV_5QKHo.js"),__vite__mapDeps([28,1,2,3,4,5,16,6,17,20,21,22,23,26,29])),meta:{title:"创建酒店",requiresAuth:!0}},{path:"hotels/edit/:id",name:"HotelEdit",component:()=>r(()=>import("./HotelForm-CV_5QKHo.js"),__vite__mapDeps([28,1,2,3,4,5,16,6,17,20,21,22,23,26,29])),meta:{title:"编辑酒店",requiresAuth:!0}},{path:"products",name:"Products",component:()=>r(()=>import("./ProductList-bwCNSUQ_.js"),__vite__mapDeps([30,1,2,3,4,5,31,32,6,33])),meta:{title:"商品管理",requiresAuth:!0}},{path:"products/create",name:"ProductCreate",component:()=>r(()=>import("./ProductForm-BvsbZlej.js"),__vite__mapDeps([34,1,2,3,4,5,16,6,17,20,21,31,32,35])),meta:{title:"创建商品",requiresAuth:!0}},{path:"products/edit/:id",name:"ProductEdit",component:()=>r(()=>import("./ProductForm-BvsbZlej.js"),__vite__mapDeps([34,1,2,3,4,5,16,6,17,20,21,31,32,35])),meta:{title:"编辑商品",requiresAuth:!0}},{path:"categories",name:"Categories",component:()=>r(()=>import("./CategoryList-BwquaBes.js"),__vite__mapDeps([36,1,2,3,4,5,32,16,6,17,37])),meta:{title:"分类管理",requiresAuth:!0}},{path:"miniprogram",component:()=>r(()=>import("./MiniProgramLayout-DJevCS7G.js"),__vite__mapDeps([38,1,2,3,4,5,6,39])),redirect:"/miniprogram/home",meta:{title:"小程序管理",requiresAuth:!0},children:[{path:"home",name:"MiniProgramHome",component:()=>r(()=>import("./HomeConfig-Bey2eqbc.js"),__vite__mapDeps([40,1,2,3,4,5,16,6,17,18,19,41,32,42,13,31,43])),meta:{title:"首页配置",requiresAuth:!0}},{path:"ads",name:"MiniProgramAds",component:()=>r(()=>import("./AdConfig-BWSVzSb1.js"),__vite__mapDeps([44,1,2,3,4,5,16,6,17,41,45])),meta:{title:"广告位配置",requiresAuth:!0}},{path:"logo",name:"MiniProgramLogo",component:()=>r(()=>import("./LogoConfig-B_KkxoVQ.js"),__vite__mapDeps([46,1,2,3,4,5,16,6,17,41,47])),meta:{title:"Logo配置",requiresAuth:!0}},{path:"statistics",name:"MiniProgramStatistics",component:()=>r(()=>import("./Statistics-G6MWkpRV.js"),__vite__mapDeps([48,1,2,3,4,5,41,6,49])),meta:{title:"数据统计",requiresAuth:!0}}]},{path:"articles",name:"Articles",component:()=>r(()=>import("./ArticleList-CJ7UQZyM.js"),__vite__mapDeps([50,1,2,3,4,5,42,6,51])),meta:{title:"文章管理",requiresAuth:!0}},{path:"articles/create",name:"ArticleCreate",component:()=>r(()=>import("./ArticleForm-CQFozy3r.js"),__vite__mapDeps([52,1,2,3,4,5,16,6,17,20,21,42,53])),meta:{title:"创建文章",requiresAuth:!0}},{path:"articles/edit/:id",name:"ArticleEdit",component:()=>r(()=>import("./ArticleForm-CQFozy3r.js"),__vite__mapDeps([52,1,2,3,4,5,16,6,17,20,21,42,53])),meta:{title:"编辑文章",requiresAuth:!0}},{path:"articles/:id",name:"ArticleDetail",component:()=>r(()=>import("./ArticleDetail-DFBgQpKv.js"),__vite__mapDeps([54,1,2,3,4,5,42,6,55])),meta:{title:"文章详情",requiresAuth:!0}},{path:"articles/categories",name:"ArticleCategories",component:()=>r(()=>import("./CategoryList-KznKSXNQ.js"),__vite__mapDeps([56,1,2,3,4,5,42,6,57])),meta:{title:"文章分类管理",requiresAuth:!0}},{path:"articles/tags",name:"ArticleTags",component:()=>r(()=>import("./TagList-DEsq0Lhe.js"),__vite__mapDeps([58,1,2,3,4,5,42,6,59])),meta:{title:"文章标签管理",requiresAuth:!0}},{path:"system/payment-config",name:"PaymentConfig",component:()=>r(()=>import("./PaymentConfig-Bhjm_hfS.js"),__vite__mapDeps([60,1,2,3,4,5,6,61])),meta:{title:"支付配置",requiresAuth:!0}},{path:"system/merchant-config",name:"MerchantConfig",component:()=>r(()=>import("./MerchantConfig-1At9PXZ4.js"),__vite__mapDeps([62,1,2,3,4,5,6,63])),meta:{title:"商家配置",requiresAuth:!0}},{path:"403",name:"Forbidden",component:()=>r(()=>import("./403-Bohp_FUU.js"),__vite__mapDeps([64,1,2,3,4,5,6,65])),meta:{title:"无权限访问",requiresAuth:!1}}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>r(()=>import("./404-BymdgUJr.js"),__vite__mapDeps([66,1,2,3,4,5,6,67])),meta:{title:"页面不存在",requiresAuth:!1}}],f=q({history:T(),routes:x});Z(f);const J=()=>"/travel/api/v1",ee=J(),E=j.create({baseURL:ee,timeout:1e4});E.interceptors.request.use(t=>{const e=v();return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("请求错误:",t),Promise.reject(t)));E.interceptors.response.use(t=>{const e=t.data;return e.code!==200?(c.error(e.message||"请求失败"),e.code===401&&(A(),f.push("/login")),e.code===403&&c.error("无权限访问"),Promise.reject(new Error(e.message||"请求失败"))):e},t=>{var e;if(console.error("响应错误:",t),t.response){const{status:s,data:i}=t.response;switch(s){case 401:c.error("未授权，请先登录"),A(),f.push("/login");break;case 403:c.error("无权限访问");break;case 404:c.error("请求的资源不存在");break;case 500:c.error("服务器内部错误");break;default:c.error((i==null?void 0:i.message)||`请求失败: ${s}`)}}else t.request?t.code==="ECONNREFUSED"||(e=t.message)!=null&&e.includes("ECONNREFUSED")?c.error("无法连接到后端服务，请确保后端服务已启动（端口 8080）"):c.error("网络错误，请检查网络连接"):c.error(t.message||"请求失败");return Promise.reject(t)});function te(t){return E({url:"/admin/auth/login",method:"post",data:t})}function re(){return E({url:"/admin/auth/logout",method:"post"})}const oe=D("auth",()=>{const t=I(v()),e=I(null);return{token:t,userInfo:e,userLogin:async n=>{try{const a=await te(n);return a.data&&a.data.token?(t.value=a.data.token,e.value={userId:a.data.userId,username:a.data.username,realName:a.data.realName},Y(a.data.token,n.remember||!1),Promise.resolve(a)):Promise.reject(new Error("登录失败"))}catch(a){return Promise.reject(a)}},userLogout:async()=>{try{await re()}catch(n){console.error("登出失败:",n)}finally{t.value="",e.value=null,A()}},setUserInfo:n=>{e.value=n}}});function y(t){const s=oe().userInfo;if(!s)return!1;if(s.roleCode==="SUPER_ADMIN")return!0;const i=s.permissions||[];return Array.isArray(t)?t.every(o=>i.includes(o)):i.includes(t)}const se={mounted(t,e){const{value:s}=e;s&&(y(s)||(t.style.display="none"))},updated(t,e){const{value:s}=e;s&&(y(s)?t.style.display="":t.style.display="none")}},ne={__name:"App",setup(t){return(e,s)=>{const i=V("router-view");return b(),S(i)}}};M([B,H,F,K,W,z,X]);const p=k(ne);for(const[t,e]of Object.entries($))p.component(t,e);p.component("v-chart",w);p.directive("has",se);p.use(C());p.use(f);p.use(U,{locale:N});p.mount("#app");export{v as g,E as s,oe as u};
