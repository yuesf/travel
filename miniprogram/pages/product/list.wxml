<!--商品列表页-->
<view class="page-container">
  <!-- 商品列表 -->
  <scroll-view
    class="product-scroll"
    scroll-y
    enable-back-to-top
    refresher-enabled
    refresher-triggered="{{loading && page === 1}}"
    bindrefresherrefresh="onPullDownRefresh"
    bindscrolltolower="onReachBottom"
  >
    <!-- 商品卡片列表 -->
    <view wx:if="{{productList.length > 0}}" class="product-list">
      <view
        wx:for="{{productList}}"
        wx:key="id"
        class="product-card"
        data-id="{{item.id}}"
        bindtap="onProductTap"
      >
        <!-- 商品图片 -->
        <image
          class="product-image"
          src="{{item.image}}"
          mode="aspectFill"
          lazy-load="{{true}}"
        />
        
        <!-- 商品信息 -->
        <view class="product-info">
          <!-- 商品名称 -->
          <view class="product-name">{{item.name}}</view>
          
          <!-- 商品简介 -->
          <view wx:if="{{item.description}}" class="product-description">
            <!-- H5类型：使用rich-text展示富文本 -->
            <rich-text wx:if="{{isH5Type}}" nodes="{{item.description}}" type="html" class="description-content-rich"></rich-text>
            <!-- 非H5类型：使用普通文本 -->
            <text wx:else class="description-content">{{item.description}}</text>
          </view>
          
          <!-- 预约按钮（H5类型时显示） -->
          <view wx:if="{{isH5Type && item.h5Link}}" class="product-reserve-btn">
            <button 
              class="reserve-button" 
              size="mini" 
              type="primary"
              data-h5-link="{{item.h5Link}}"
              catchtap="onReserveTap"
            >
              预约
            </button>
          </view>
        </view>
      </view>
    </view>

    <!-- 空状态 -->
    <view wx:else class="empty-container">
      <empty text="该分类暂无商品" show-action="{{false}}" />
    </view>

    <!-- 加载更多提示 -->
    <view wx:if="{{productList.length > 0 && loading && page > 1}}" class="loading-more">
      <text>加载中...</text>
    </view>
    <view wx:if="{{productList.length > 0 && !hasMore && !loading}}" class="no-more">
      <text>没有更多了</text>
    </view>
  </scroll-view>
</view>
