<!--æœç´¢é¡µé¢-->
<view class="page-container">
  <!-- æœç´¢æ¡† -->
  <view class="search-header">
    <view class="search-input-wrapper">
      <input
        class="search-input"
        type="text"
        placeholder="æœç´¢æ™¯ç‚¹ã€é…’åº—ã€å•†å“"
        value="{{keyword}}"
        bindinput="onInput"
        bindconfirm="onConfirm"
        confirm-type="search"
        focus="{{true}}"
      />
      <view class="search-btn" bindtap="onConfirm">æœç´¢</view>
    </view>
  </view>

  <!-- æœç´¢å†å² -->
  <view class="search-history" wx:if="{{!hasSearched && searchHistory.length > 0}}">
    <view class="history-header">
      <text class="history-title">æœç´¢å†å²</text>
      <text class="history-clear" bindtap="onClearHistory">æ¸…é™¤</text>
    </view>
    <view class="history-list">
      <view
        class="history-item"
        wx:for="{{searchHistory}}"
        wx:key="*this"
        data-keyword="{{item}}"
        bindtap="onHistoryTap"
      >
        {{item}}
      </view>
    </view>
  </view>

  <!-- æœç´¢ç»“æœ -->
  <view class="search-results" wx:if="{{hasSearched}}">
    <view class="results-header">
      <text class="results-title">æœç´¢ç»“æœ</text>
      <text class="results-count" wx:if="{{searchResults.length > 0}}">
        å…±{{searchResults.length}}æ¡
      </text>
    </view>

    <!-- ç»“æœåˆ—è¡¨ -->
    <view class="results-list" wx:if="{{searchResults.length > 0}}">
      <view
        class="result-item"
        wx:for="{{searchResults}}"
        wx:key="id"
        data-item="{{item}}"
        bindtap="onResultTap"
      >
        <image class="result-image" src="{{item.image || item.coverImage}}" mode="aspectFill" />
        <view class="result-info">
          <view class="result-title">{{item.name || item.title}}</view>
          <view class="result-desc" wx:if="{{item.description || item.summary}}">
            {{item.description || item.summary}}
          </view>
          <view class="result-footer">
            <text class="result-price" wx:if="{{item.price}}">Â¥{{item.price}}</text>
            <text class="result-location" wx:if="{{item.location || item.address}}">
              {{item.location || item.address}}
            </text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:else>
      <text class="empty-icon">ğŸ”</text>
      <text class="empty-text">æš‚æ— æœç´¢ç»“æœ</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <text>æœç´¢ä¸­...</text>
  </view>
</view>
