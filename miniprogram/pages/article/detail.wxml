<!--æ–‡ç« è¯¦æƒ…é¡µ-->
<view class="page-container">
  <view wx:if="{{article}}" class="detail-content">
    <!-- æ–‡ç« å¤´éƒ¨ -->
    <view class="article-header">
      <view class="article-title">{{article.title}}</view>
      <view class="article-meta">
        <text class="meta-item">{{article.author || 'ç®¡ç†å‘˜'}}</text>
        <text class="meta-separator">Â·</text>
        <text class="meta-item">{{article.publishTimeText}}</text>
      </view>
      <view class="article-stats">
        <text class="stat-item">é˜…è¯» {{article.viewCount || 0}}</text>
        <text class="stat-separator">Â·</text>
        <text class="stat-item">ç‚¹èµ {{article.likeCount || 0}}</text>
        <text class="stat-separator">Â·</text>
        <text class="stat-item">æ”¶è— {{article.favoriteCount || 0}}</text>
      </view>
    </view>

    <!-- å°é¢å›¾ -->
    <image
      wx:if="{{article.coverImage}}"
      class="article-cover"
      src="{{article.coverImage}}"
      mode="widthFix"
      lazy-load="{{true}}"
    />

    <!-- æ–‡ç« å†…å®¹åŒºåŸŸ -->
    <view class="article-content">
      <rich-text nodes="{{article.content}}"></rich-text>
    </view>

    <!-- ç›¸å…³æ–‡ç« æ¨è -->
    <view wx:if="{{relatedArticles.length > 0}}" class="related-section">
      <view class="section-title">ç›¸å…³æ¨è</view>
      <view class="related-list">
        <view
          wx:for="{{relatedArticles}}"
          wx:key="id"
          class="related-item"
          data-id="{{item.id}}"
          bindtap="onRelatedArticleTap"
        >
          <image
            wx:if="{{item.coverImage}}"
            class="related-cover"
            src="{{item.coverImage}}"
            mode="aspectFill"
            lazy-load="{{true}}"
          />
          <view class="related-info">
            <view class="related-title">{{item.title}}</view>
            <view class="related-meta">
              <text class="related-stat">é˜…è¯» {{item.viewCount || 0}}</text>
              <text class="related-separator">Â·</text>
              <text class="related-stat">ç‚¹èµ {{item.likeCount || 0}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ ï¼ˆå›ºå®šï¼‰ -->
  <view wx:if="{{article}}" class="action-bar safe-area-bottom">
    <view
      class="action-btn {{isLiked ? 'active' : ''}}"
      bindtap="onLikeTap"
    >
      <text class="action-icon">{{isLiked ? 'â¤ï¸' : 'ğŸ¤'}}</text>
      <text class="action-text">ç‚¹èµ</text>
    </view>
    <view
      class="action-btn {{isFavorited ? 'active' : ''}}"
      bindtap="onFavoriteTap"
    >
      <text class="action-icon">{{isFavorited ? 'â­' : 'â˜†'}}</text>
      <text class="action-text">æ”¶è—</text>
    </view>
    <button class="action-btn share-btn" open-type="share">
      <text class="action-icon">ğŸ“¤</text>
      <text class="action-text">åˆ†äº«</text>
    </button>
  </view>
</view>
